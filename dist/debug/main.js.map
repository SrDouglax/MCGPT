{"version":3,"sources":["../../scripts/main.ts","../../scripts/modules/ChatGPT.ts"],"sourcesContent":["import { world } from \"@minecraft/server\";\r\nimport { ChatGPT } from \"./modules/ChatGPT\";\r\n\r\n/**\r\n * Event handler for chat messages sent in the game\r\n * Listens for chat messages and processes them through ChatGPT\r\n * @param event The chat event containing message and sender information\r\n */\r\nworld.afterEvents.chatSend.subscribe(async (event) => {\r\n  const message = event.message;\r\n  const sender = event.sender;\r\n\r\n  const gpt = new ChatGPT()\r\n  const res = await gpt.GetResponse(sender, message);\r\n  world.sendMessage(\"<MCGPT> \" + res);\r\n})","import { Player, system } from \"@minecraft/server\";\r\nimport { HttpHeader, HttpRequest, HttpRequestMethod, http } from \"@minecraft/server-net\";\r\n\r\n/**\r\n * Class to handle ChatGPT API interactions\r\n */\r\nexport class ChatGPT {\r\n  /**\r\n   * Gets a response from the ChatGPT API\r\n   * @param sender The player who sent the message\r\n   * @param message The message to send to ChatGPT\r\n   * @returns The response from ChatGPT\r\n   */\r\n  async GetResponse(sender: Player, message: string, chatId = 'default'): Promise<string | undefined> {\r\n    try {\r\n      const req = new HttpRequest(`http://localhost:3000/chat/${chatId}`);\r\n\r\n      req.body = JSON.stringify({\r\n        message,\r\n        user: sender.name\r\n      });\r\n\r\n      req.method = (HttpRequestMethod as any).Post;\r\n      req.headers = [new HttpHeader(\"Content-Type\", \"application/json\")];\r\n\r\n      const res = await http.request(req);\r\n      return JSON.parse(res.body).response\r\n    } catch (error) {\r\n      console.log(error);\r\n      system.run(() => {\r\n        sender.sendMessage(`Errow: ${error}`);\r\n      });\r\n    }\r\n  }\r\n}"],"mappings":"AAAA,OAAS,UAAa,oBCAtB,OAAiB,WAAc,oBAC/B,OAAS,WAAY,YAAa,kBAAmB,SAAY,wBAK1D,IAAM,QAAN,KAAc,CAOnB,MAAM,YAAY,OAAgB,QAAiB,OAAS,UAAwC,CAClG,GAAI,CACF,MAAM,IAAM,IAAI,YAAY,8BAA8B,MAAM,EAAE,EAElE,IAAI,KAAO,KAAK,UAAU,CACxB,QACA,KAAM,OAAO,IACf,CAAC,EAED,IAAI,OAAU,kBAA0B,KACxC,IAAI,QAAU,CAAC,IAAI,WAAW,eAAgB,kBAAkB,CAAC,EAEjE,MAAM,IAAM,MAAM,KAAK,QAAQ,GAAG,EAClC,OAAO,KAAK,MAAM,IAAI,IAAI,EAAE,QAC9B,OAAS,MAAO,CACd,QAAQ,IAAI,KAAK,EACjB,OAAO,IAAI,IAAM,CACf,OAAO,YAAY,UAAU,KAAK,EAAE,CACtC,CAAC,CACH,CACF,CACF,ED1BA,MAAM,YAAY,SAAS,UAAU,MAAO,OAAU,CACpD,MAAM,QAAU,MAAM,QACtB,MAAM,OAAS,MAAM,OAErB,MAAM,IAAM,IAAI,QAChB,MAAM,IAAM,MAAM,IAAI,YAAY,OAAQ,OAAO,EACjD,MAAM,YAAY,WAAa,GAAG,CACpC,CAAC","names":[],"file":"../scripts/main.js"}